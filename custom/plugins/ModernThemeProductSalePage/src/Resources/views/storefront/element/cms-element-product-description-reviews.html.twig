{% sw_extends "@Storefront/storefront/element/cms-element-product-description-reviews.html.twig" %}
 {% set descriptionTabId = "description-tab-" ~ product.id %}
    {% set manufacturerTabHref = "#manufacturer-tab-" ~ product.id ~ "-pane" %}
    {% set manufacturerTabContent = "manufacturer-tab-" ~ product.id ~ "-pane" %}
    {% set propertiesTabId = "properties-tab-" ~ product.id %}
    {% set propertiesTabHref = "#properties-tab-" ~ product.id ~ "-pane" %}
    {% set propertiesTabContent = "properties-tab-" ~ product.id ~ "-pane" %}



                            {% block element_product_description_reviews_tabs_navigation_container %}
                                  {% set config = element.fieldConfig.elements %}
                                  <ul class="nav nav-tabs product-detail-tab-navigation-list"
                                      id="product-detail-tabs"
                                      role="tablist">
                                        {% block element_product_description_reviews_tabs_navigation_description %}
                                              <li class="nav-item">
                                                    <a class="nav-link {% if (ratingSuccess != 1) and (ratingSuccess != -1) %}active{% endif %} product-detail-tab-navigation-link description-tab"
                                                       id="{{ descriptionTabId }}"
                                                       data-bs-toggle="tab"
                                                       data-off-canvas-tabs="true"
                                                       href="{{ descriptionTabHref }}"
                                                       role="tab"
                                                       aria-controls="{{ descriptionTabContent }}"
                                                       aria-selected="true">
                                                          <span>{{ "detail.tabsDescription"|trans|sw_sanitize }}</span>
                                                          <span class="product-detail-tab-navigation-icon">
                                                    {% sw_icon 'arrow-medium-right' style {'pack':'solid'} %}
                                                </span>
                                                          {% if element.data.product.translated.description|length > 0 %}
                                                                <span class="product-detail-tab-preview">
                                                        {{ page.product.translated.description|raw|striptags|sw_sanitize|u.truncate(125, '…') }}

                                                                      {# truncate always cuts down the length to 125 characters.
                                                               So it will only shorten the string if it exceeds 125 chars.
                                                               Therefor, only show the button when the length of the text is
                                                               greater or equal then 126 characters. #}
                                                                      {% if element.data.product.translated.description|length >= 126 %}
                                                                            <span class="product-detail-tab-preview-more">{{ "detail.tabsPreviewMore"|trans|sw_sanitize }}</span>
                                                                      {% endif %}
                                                        </span>
                                                          {% endif %}
                                                    </a>
                                              </li>
                                        {% endblock %}

                                        {% block  element_product_description_reviews_tabs_navigation_properties %}
                                              <li class="nav-item">
                                                    <a class="nav-link {% if (ratingSuccess == 1) or (ratingSuccess == -1) %}active{% endif %} product-detail-tab-navigation-link properties-tab"
                                                       id="{{ propertiesTabId }}"
                                                       data-bs-toggle="tab"
                                                       data-off-canvas-tabs="true"
                                                       href="{{ propertiesTabHref }}"
                                                       role="tab"
                                                       aria-controls="{{ propertiesTabContent }}"
                                                       aria-selected="true">
                                                          <span>{{ "detail.navLinkProperties"|trans|sw_sanitize }}</span>
                                                          <span class="product-detail-tab-navigation-icon">
                                                    {% sw_icon 'arrow-medium-right' style {'pack':'solid'} %}
                                                </span>
                                                          {% if element.data.product.translated.description|length > 0 %}
                                                                <span class="product-detail-tab-preview">
                                                        {{ page.product.translated.description|raw|striptags|sw_sanitize|u.truncate(125, '…') }}

                                                                      {# truncate always cuts down the length to 125 characters.
                                                               So it will only shorten the string if it exceeds 125 chars.
                                                               Therefor, only show the button when the length of the text is
                                                               greater or equal then 126 characters. #}
                                                                      {% if element.data.product.translated.description|length >= 126 %}
                                                                            <span class="product-detail-tab-preview-more">{{ "detail.tabsPreviewMore"|trans|sw_sanitize }}</span>
                                                                      {% endif %}
                                                        </span>
                                                          {% endif %}
                                                    </a>
                                              </li>
                                        {% endblock %}

                                        {% block  element_product_description_reviews_tabs_navigation_manufacturer %}
                                              <li class="nav-item">
                                                    <a class="nav-link {% if (ratingSuccess == 1) or (ratingSuccess == -1) %}active{% endif %} product-detail-tab-navigation-link manufacturer-tab"
                                                       id="{{ propertiesTabId }}"
                                                       data-bs-toggle="tab"
                                                       data-off-canvas-tabs="true"
                                                       href="{{ manufacturerTabHref }}"
                                                       role="tab"
                                                       aria-controls="{{ manufacturerContent }}"
                                                       aria-selected="true">
                                                          <span>{{ "detail.navLinkManufacturer"|trans|sw_sanitize }}</span>
                                                          <span class="product-detail-tab-navigation-icon">
                                                    {% sw_icon 'arrow-medium-right' style {'pack':'solid'} %}
                                                </span>
                                                          {% if element.data.product.translated.description|length > 0 %}
                                                                <span class="product-detail-tab-preview">
                                                        {{ page.product.translated.description|raw|striptags|sw_sanitize|u.truncate(125, '…') }}

                                                                      {# truncate always cuts down the length to 125 characters.
                                                               So it will only shorten the string if it exceeds 125 chars.
                                                               Therefor, only show the button when the length of the text is
                                                               greater or equal then 126 characters. #}
                                                                      {% if element.data.product.translated.description|length >= 126 %}
                                                                            <span class="product-detail-tab-preview-more">{{ "detail.tabsPreviewMore"|trans|sw_sanitize }}</span>
                                                                      {% endif %}
                                                        </span>
                                                          {% endif %}
                                                    </a>
                                              </li>
                                        {% endblock %}


                                        {% block element_product_description_reviews_tabs_navigation_review %}
                                              {% if config('core.listing.showReview') %}
                                                    <li class="nav-item">
                                                          <a class="nav-link {% if (ratingSuccess == 1) or (ratingSuccess == -1) %}active{% endif %} product-detail-tab-navigation-link review-tab"
                                                             id="{{ reviewTabId }}"
                                                             data-bs-toggle="tab"
                                                             data-off-canvas-tabs="true"
                                                             href="{{ reviewTabHref }}"
                                                             role="tab"
                                                             aria-controls="{{ reviewTabContent }}"
                                                             aria-selected="true">
                                                                {{ "detail.tabsReview"|trans|sw_sanitize }}
                                                                <span class="product-detail-tab-navigation-icon">
                                                        {% sw_icon 'arrow-medium-right' style {'pack':'solid'} %}
                                                    </span>
                                                          </a>
                                                    </li>
                                              {% endif %}
                                        {% endblock %}
                                  </ul>
                            {% endblock %}

{% block element_product_description_reviews_tabs_content_container %}
      <div class="tab-content">
            {% block element_product_description_reviews_tabs_content_description %}
                {{ parent() }}
            {% endblock %}

            {% block element_product_description_reviews_tabs_content_properties %}
                  <div class="tab-pane fade show {% if (element.data.ratingSuccess == 1) or (element.data.ratingSuccess == -1) %}active{% endif %}"
                       id="{{ propertiesTabContent }}"
                       role="tabpanel"
                       aria-labelledby="{{ propertiesTabId }}">
                        {% sw_include '@Storefront/storefront/component/product/properties.html.twig' with {
                              product: element.data.product
                        } %}
                  </div>
            {% endblock %}

            {% block element_product_description_reviews_tabs_content_manufacturer %}
                  <div class="tab-pane fade show {% if (element.data.ratingSuccess == 1) or (element.data.ratingSuccess == -1) %}active{% endif %}"
                       id="{{ manufacturerTabContent }}"
                       role="tabpanel"
                       aria-labelledby="{{ manufacturerTabId }}">
                        {% sw_include '@Storefront/storefront/component/product/manufacturer.html.twig' with {
                              product: element.data.product
                        } %}
                  </div>
            {% endblock %}

            {% block element_product_description_reviews_tabs_content_review %}
                 {{ parent() }}
            {% endblock %}
      </div>
{% endblock %}
